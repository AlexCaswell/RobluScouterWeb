<!DOCTYPE html>
<html>
<head>
	<title>Roblu Scouter - Web Interface | Settings</title>

	<!-- Materilize -->
	<!--Import Google Icon Font-->
  	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<!--Import materialize.css-->
	<link type="text/css" rel="stylesheet" href="materialize/css/materialize.min.css"  media="screen,projection"/>


  	<!--Let browser know website is optimized for mobile-->
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

 	<script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
</head>
<body>
 	<nav style="position: fixed; top: 0; left: 0; z-index: 1000;">
 		<div class="nav-wrapper">
      		<a href="index.html"><i class="material-icons" style="display: inline-block; z-index: 50px; margin-left: 10px; vertical-align: center;">arrow_back</i></a><a style="font-size: 1.6rem; margin-left: 40px;" class="brand-logo left">Settings</a>
  		</div>
 	</nav><br><br><br>
 	<div style="margin: 0 3% 0 3%;">
 		<p style=" padding-left: 1%; color: #CCC; margin-bottom: 0;"><b>ROBLU CLOUD</b></p>
 		<hr style="border-color: #CCC;">
 		<div class="indent_settings modal-trigger" href="#username">
	 		<p style=" font-size: 1.3em; color: #CCC; margin: 10px 0 0 0;">Roblu Cloud Username</p>
	 		<p style=" color: #CCC; margin: 0 0 10px 0;">Set your name, this will appear on everyone's devices next to the scouting data you've edited.</p>
 		</div>
 		<hr style="border: none; background-color: #888; height: 1px;">
 		<div class="indent_settings modal-trigger" href="#server_ip">
	 		<p style=" font-size: 1.3em; color: #CCC; margin: 10px 0 0 0;">Server IP</p>
	 		<p style=" color: #CCC; margin: 0 0 10px 0;">Set the IP address is you're using a custom server. Leave blank for the official Roblu Cloud server.</p>
 		</div>
 		<hr style="border: none; background-color: #888; height: 1px;">
		<div class="indent_settings modal-trigger" href="#team_code">
	 		<p style=" font-size: 1.3em; color: #CCC; margin: 10px 0 0 0;">Team code</p>
	 		<p style=" color: #CCC; margin: 0 0 10px 0;">Enter team code for syncing.</p>
 		</div>
 		<hr style="border: none; background-color: #888; height: 1px;">
 		<div class="indent_settings modal-trigger" href="#ac_mode">
	 		<p style=" font-size: 1.3em; color: #CCC; margin: 10px 0 0 0;">Auto checkout</p>
	 		<p style=" color: #CCC; margin: 0 0 10px 0;">Set up this device to automatically check out certain assignment. This option is for teams using a strict six scouting device setup.</p>
 		</div>
 		<hr style="border: none; background-color: #888; height: 1px;">
 		<style type="text/css">
 			.indent_settings {
 				padding-left: 6%;
 			}

 			/* Change text input colors */

 			  /* label color */
			.input-field label {
				color: #CCC !important;
			}
			/* label focus color */
			.input-field input[type=text]:focus + label {
				color: #FFF !important;
			}
			/* label underline focus color */
			.input-field input[type=text]:focus {
				border-bottom: 1px solid #FFF !important;
				box-shadow: 0 1px 0 0 #FFF !important;
			}
			/* valid color */
			.input-field input[type=text].valid {
				border-bottom: 1px solid #FFF !important;
				box-shadow: 0 1px 0 0 #FFF !important;
			}
			/* invalid color */
			.input-field input[type=text].invalid {
				border-bottom: 1px solid #FFF !important;
				box-shadow: 0 1px 0 0 #FFF !important;
			}
			/* icon prefix focus color */
			.input-field .prefix.active {
				color: #FFF !important;
			}
 		</style>

 		<!-- Roblu Cloud Username -->
		<div id="username" class="modal">
			<div class="modal-content">
				<h4 style="font-size: 1.6em; color: #FFF;">Roblu Cloud Username</h4>
				<br>
				<div class="input-field col s6">
		        	<input placeholder="" style="color: #FFF;" id="first_name" type="text" class="validate">
		        	<label for="first_name">Enter username</label>
		        </div>
			</div>
		    <div class="modal-footer">
		    	<a style="color: #FFF;" href="#!" onclick="loadCurrentSettings()" class="modal-action modal-close btn-flat">Cancel</a>
		    	<a style="color: #FFF;" href="#!" onclick="saveUsername()" class="modal-action modal-close btn-flat">Ok</a>
		    </div>
		</div>
		<!-- Server IP -->
		<div id="server_ip" class="modal">
			<div class="modal-content">
				<h4 style="font-size: 1.6em; color: #FFF;">Server IP</h4>
				<br>
				<div class="input-field col s6">
		        	<input placeholder="" style="color: #FFF;" id="first_name" type="text" class="validate">
		        	<label for="first_name">Enter IP address</label>
		        </div>
			</div>
		    <div class="modal-footer">
		    	<a style="color: #FFF;" href="#!" onclick="loadCurrentSettings()" class="modal-action modal-close btn-flat">Cancel</a>
		    	<a style="color: #FFF;" href="#!"  onclick="saveServerIp()" class="modal-action modal-close btn-flat">Ok</a>
		    </div>
		</div>
		<!-- Team code -->
		<div id="team_code" class="modal">
			<div class="modal-content">
				<h4 style="font-size: 1.6em; color: #FFF;">Team code</h4>
				<br>
				<div class="input-field col s6">
		        	<input placeholder="" style="color: #FFF;" id="first_name" type="text" class="validate">
		        	<label for="first_name">Enter team code</label>
		        </div>
			</div>
		    <div class="modal-footer">
		    	<a style="color: #FFF;" href="#!"  onclick="loadCurrentSettings()" class="modal-action modal-close btn-flat">Cancel</a>
		    	<a style="color: #FFF;" href="#!"  onclick="saveTeamCode()" class="modal-action modal-close btn-flat">Ok</a>
		    </div>
		</div>
		<!-- Auto checkout -->
		<div id="ac_mode" class="modal modal-fixed-footer">
			<div class="modal-content">
				<h4 style="font-size: 1.6em; color: #FFF;">Auto checkout</h4>
				<p>
					<input name="ac_group" type="radio" id="ac_dis" />
					<label style="color: #FFF;" for="ac_dis">Disabled</label>
				</p>
				<p>
					<input name="ac_group" type="radio" id="ac_pit" />
					<label style="color: #FFF;" for="ac_pit">Pit</label>
				</p>
				<p>
					<input name="ac_group" type="radio" id="ac_rd1" />
					<label style="color: #FFF;" for="ac_rd1">Red Device 1</label>
				</p>
				<p>
					<input name="ac_group" type="radio" id="ac_rd2" />
					<label style="color: #FFF;" for="ac_rd2">Red Device 2</label>
				</p>
				<p>
					<input name="ac_group" type="radio" id="ac_rd3" />
					<label style="color: #FFF;" for="ac_rd3">Red Device 3</label>
				</p>
				<p>
					<input name="ac_group" type="radio" id="ac_bd1" />
					<label style="color: #FFF;" for="ac_bd1">Blue Device 1</label>
				</p>
				<p>
					<input name="ac_group" type="radio" id="ac_bd2" />
					<label style="color: #FFF;" for="ac_bd2">Blue device 2</label>
				</p>
				<p>
					<input name="ac_group" type="radio" id="ac_bd3" />
					<label style="color: #FFF;" for="ac_bd3">Blue Device 3</label>
				</p>
			</div>
		    <div class="modal-footer">
		    	<a style="color: #FFF;" href="#!" onclick="loadCurrentSettings()" class="modal-action modal-close btn-flat">Cancel</a>
		    	<a style="color: #FFF;" href="#!" onclick="saveAcMode()" class="modal-action modal-close btn-flat">Ok</a>
		    </div>
		</div>
		<style type="text/css">
  			input[type='radio']:checked + label:after {
  				background: #888;
  				border: #888;
  			}
		</style>

 	</div>

<script type="text/javascript">


	$(document).ready(function() {

		// set Ui colors
		var primaryColor = "#3F51B5";
		var cardColor = "#444444";
		var backgroundColor = "#303030";

		$(".card").attr("style", "background: " + cardColor + " !important;");
		$(".modal").attr("style", "background: " + cardColor + " !important;");
		$(".modal-footer").attr("style", "background: " + cardColor + " !important;");
		$("nav").attr("style", $("nav").attr("style") + " background: " + primaryColor + " !important;");
		$("body").attr("style", "background: " + backgroundColor + " !important;");
		
		$(".modal").modal();

		loadDefaultsIfNeeded();

		loadCurrentSettings();

	});

	/****

	Settings storage functions

	****/

	function saveUsername() {
		localStorage.setItem("username", $("#username input").val());
	}

	function saveServerIp() {
		localStorage.setItem("serverIp", $("#server_ip input").val());
	}

	function saveTeamCode() {
		localStorage.setItem("teamCode", $("#team_code input").val());
	}

	function saveAcMode() {
		var ac_mode_num;
		if ($("#ac_dis").is(':checked')) {
			ac_mode_num = 0;
		}
		if ($("#ac_pit").is(':checked')) {
			ac_mode_num = 7;
		}
		if ($("#ac_rd1").is(':checked')) {
			ac_mode_num = 1;
		}
		if ($("#ac_rd2").is(':checked')) {
			ac_mode_num = 2;
		}
		if ($("#ac_rd3").is(':checked')) {
			ac_mode_num = 3;
		}
		if ($("#ac_bd1").is(':checked')) {
			ac_mode_num = 4;
		}
		if ($("#ac_bd2").is(':checked')) {
			ac_mode_num = 5;
		}
		if ($("#ac_bd3").is(':checked')) {
			ac_mode_num = 6;
		}
		localStorage.setItem("autoCheckoutMode", ac_mode_num);
	}

	function loadCurrentSettings() {
		//load username
		$("#username input").val(localStorage.getItem("username"));
		//load serverIp
		$("#server_ip input").val(localStorage.getItem("serverIp"));
		//load teamCode
		$("#team_code input").val(localStorage.getItem("teamCode"));

		//load autoCheckoutMode
		if(localStorage.getItem("autoCheckoutMode") == 0) {
				$("#ac_dis").prop("checked", true);
		}
		if(localStorage.getItem("autoCheckoutMode") == 7) {
				$("#ac_pit").prop("checked", true);
		}
		if(localStorage.getItem("autoCheckoutMode") == 1) {
				$("#ac_rd1").prop("checked", true);
		}
		if(localStorage.getItem("autoCheckoutMode") == 2) {
				$("#ac_rd2").prop("checked", true);
		}
		if(localStorage.getItem("autoCheckoutMode") == 3) {
				$("#ac_rd3").prop("checked", true);
		}
		if(localStorage.getItem("autoCheckoutMode") == 4) {
				$("#ac_bd1").prop("checked", true);
		}
		if(localStorage.getItem("autoCheckoutMode") == 5) {
				$("#ac_bd2").prop("checked", true);
		}
		if(localStorage.getItem("autoCheckoutMode") == 6) {
				$("#ac_bd3").prop("checked", true);
		}

	}

	//Checks if settings are set in localStorage. If they are not, set them to the defaults.
	function loadDefaultsIfNeeded() {
		$.getJSON("../default_settings.json", function(json) {
			if (localStorage.getItem("username") == "") { localStorage.setItem("username", json.username); }
			if (localStorage.getItem("serverIp") == "") { localStorage.setItem("serverIp", json.serverIp); }
			if (localStorage.getItem("teamCode") == "") { localStorage.setItem("teamCode", json.teamCode); }
			if (localStorage.getItem("autoCheckoutMode") == "") { localStorage.setItem("autoCheckoutMode", json.autoCheckoutMode); }
		});
	}

</script>

 <!--Import jQuery before materialize.js-->
 <script type="text/javascript" src="materialize/js/materialize.min.js"></script>
</body>

</html>